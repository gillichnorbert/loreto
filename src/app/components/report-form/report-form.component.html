<!-- 1. F≈ë K√°rtya (Bootstrap Card) -->
<div class="card shadow-lg" role="main" aria-labelledby="pageTitle">
  
  <!-- 2. K√°rtya Fejl√©c -->
  <div class="card-header text-center ">
    <!-- A logo anim√°ci√≥t megtartjuk, mert az egyedi √©s men≈ë -->
    <div class="logo-wrapper py-2">
      <img src="what.png" alt="">
    </div>
  </div>

  <!-- 3. K√°rtya T√∂rzs (Bootstrap ≈∞rlap R√°cs) -->
  <div class="card-body p-4 p-md-5">
    <form [formGroup]="reportForm" (ngSubmit)="onSave()" class="needs-validation" novalidate>
      
      <!-- Bootstrap R√°cs (g-3 = gutter 3) -->
      <div class="row g-3">

        <!-- ID (Teljes sz√©less√©g) -->
        <div class="col-12">
          <label for="id" class="form-label">ID interno</label>
          <input id="id" type="text" class="form-control" formControlName="id">
        </div>

        <!-- Kliens (F√©l sz√©less√©g) -->
        <div class="col-md-6">
          <label for="client" class="form-label">Cliente / Comprador</label>
          <input id="client" type="text" class="form-control" placeholder="Nombre o ID del cliente" formControlName="client">
        </div>

        <!-- Rendel√©si sz√°m (F√©l sz√©less√©g) -->
        <div class="col-md-6">
          <label for="orderNumber" class="form-label">N√∫mero de pedido</label>
          <input id="orderNumber" type="text" class="form-control" placeholder="Ingrese el n√∫mero de pedido" formControlName="orderNumber">
        </div>

        <!-- M√°rka (F√©l sz√©less√©g) -->
        <div class="col-md-6">
          <label for="brand" class="form-label">Marca</label>
          <select id="brand" class="form-select" formControlName="brand">
            <option value="">Seleccione una marca</option>
            <option value="Renault/Dacia">Renault / Dacia</option>
            <option value="Stellantis">Stellantis</option>
            <option value="Nissan">Nissan</option>
            <option value="Kia">Kia</option>
            <option value="MG">MG</option>
            <option value="Omoda">Omoda</option>
            <option value="Jaecoo">Jaecoo</option>
          </select>
        </div>

        <!-- Alkatr√©sz (F√©l sz√©less√©g) -->
        <div class="col-md-6">
          <label for="part" class="form-label">Pieza</label>
          <input id="part" type="text" class="form-control" placeholder="Nombre o n√∫mero de pieza" formControlName="part">
        </div>

        <!-- Ok (F√©l sz√©less√©g) -->
        <div class="col-md-6">
          <label for="reason" class="form-label">Motivo de devoluci√≥n</label>
          <select id="reason" class="form-select" formControlName="reason">
            <option value="">Seleccione el motivo</option>
            <option value="Calidad">Calidad</option>
            <option value="Garant√≠a">Garant√≠a</option>
            <option value="Casco / Provisi√≥n">Casco / Provisi√≥n</option>
          </select>
        </div>

        <!-- St√°tusz (F√©l sz√©less√©g) -->
        <div class="col-md-6">
          <label for="status" class="form-label">Estado</label>
          <select id="status" class="form-select" formControlName="status">
            <option value="">Seleccione el estado</option>
            <option value="Enviado a f√°brica">Enviado a f√°brica</option>
            <option value="Pagado">Pagado</option>
            <option value="Rechazado">Rechazado</option>
          </select>
        </div>

        <!-- Komment√°r (Teljes sz√©less√©g) -->
        <div class="col-12">
          <label for="comment" class="form-label">Comentario interno</label>
          <textarea id="comment" class="form-control" placeholder="Notas internas..." formControlName="comment" rows="4"></textarea>
        </div>

        <!-- Elv√°laszt√≥ -->
        <div class="col-12"><hr class="my-3"></div>
<!-- L√©tez≈ë riport v√°laszt√≥ -->
        <div class="col-12">
          <label for="selectReport" class="form-label">Seleccionar reporte existente</label>
          <select id="selectReport" class="form-select form-select-lg" [value]="selectedReportId" (change)="onReportSelected($event)">
            <option value="">-- Ninguno --</option>
            <option *ngFor="let report of (reports$ | async)" [value]="report.id">
              {{ report.id }} ‚Äî {{ report.orderNumber || 'sin pedido' }}
            </option>
          </select>
        </div>

        <!-- Gombok (Actions) -->
        <div class="col-12">
          <div class="d-flex flex-wrap align-items-center gap-2">
            
            <button type="button" (click)="onSave()" class="btn btn-success btn-lg px-4">üíæ Guardar</button>
            <button type="button" (click)="onDelete()" class="btn btn-outline-danger">‚ùå Borrar</button>
            <button type="button" (click)="onClearAll()" class="btn btn-outline-secondary btn-sm">üßπ Borrar todo</button>
            
            <!-- Riportok sz√°ma (jobbra igaz√≠tva) -->
            <span class="badge text-bg-light ms-auto fs-6 border" style="padding: 0.6em 0.8em;">
              üìä {{ (reports$ | async)?.length || 0 }} reportes
            </span>
          </div>
        </div>
        
        <!-- Gomb-csoport az Importhoz/Exporthoz -->
        <div class="col-12">
          <div class="btn-group w-100" role="group" aria-label="Export/Import actions">
            <button type="button" (click)="onImportClick()" class="btn btn-outline-primary">üìÇ Importar CSV/XLSX</button>
            <button type="button" (click)="onExportCSV()" class="btn btn-outline-primary">üìÅ Exportar a Excel</button>
            <button type="button" (click)="onExportSelectedPDF()" class="btn btn-outline-primary">üìÑ Exportar PDF</button>
          </div>
        </div>

        <!-- Archiv√°l√°s (K√ºl√∂n gomb) -->
         <div class="col-12">
           <button type="button" (click)="onArchive()" class="btn btn-outline-secondary btn-sm w-100">üóÑÔ∏è Archivado autom√°tico</button>
         </div>

        <!-- Elv√°laszt√≥ -->
        <div class="col-12"><hr class="my-3"></div>

        
      </div>
    </form>
  </div>
</div>

<!-- Rejtett F√°jl Input (marad) -->
<input 
  type="file" 
  #fileInput 
  (change)="onFileSelected($event)"
  accept=".csv,.xlsx,.xls,.txt" 
  style="display:none"
>